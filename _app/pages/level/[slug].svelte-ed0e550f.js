import{S as e,i as s,s as n,j as r,k as t,e as a,t as o,m as c,n as l,c as u,a as m,d as f,g,b as d,o as $,f as i,E as p,u as h,w,x as y,h as v,M as k,O as j,v as S,H as N,V as T,r as x,U as E,Q as R,T as A,N as I}from"../../chunks/vendor-09e2d04d.js";import{p as M}from"../../chunks/stores-479d6723.js";import{N as b,M as L,R as V}from"../../chunks/ReceiveGoldUI-3470665a.js";import{M as B}from"../../chunks/MessageBox-a0c47c60.js";/* empty css                                                        */import{g as C,c as D}from"../../chunks/stores-68f61374.js";import{s as H}from"../../chunks/scales-63786811.js";function O(e){let s,n;return s=new L({}),{c(){r(s.$$.fragment)},l(e){c(s.$$.fragment,e)},m(e,r){$(s,e,r),n=!0},i(e){n||(y(s.$$.fragment,e),n=!0)},o(e){h(s.$$.fragment,e),n=!1},d(e){S(s,e)}}}function P(e){let s,n,t,o,l;return n=new V({}),{c(){s=a("div"),r(n.$$.fragment)},l(e){s=u(e,"DIV",{});var r=m(s);c(n.$$.fragment,r),r.forEach(f)},m(e,r){i(e,s,r),$(n,s,null),l=!0},i(e){l||(y(n.$$.fragment,e),k((()=>{o&&o.end(1),t||(t=R(s,A,{y:-200,duration:700})),t.start()})),l=!0)},o(e){h(n.$$.fragment,e),t&&t.invalidate(),o=I(s,E,{}),l=!1},d(e){e&&f(s),S(n),e&&o&&o.end()}}}function U(e){let s,n,N,T,R,A,I,M,L,V,C,D,H,U,G=e[3].wonRound+"";s=new B({props:{mood:e[0],noteLetter:e[2].params.slug,message:e[4][e[1]]}}),T=new b({});const Q=[P,O],_=[];function q(e,s){return e[3].wonRound?0:1}return A=q(e),I=_[A]=Q[A](e),C=new B({props:{player:!0,message:"i know how to do this"}}),C.$on("click",e[5]),{c(){r(s.$$.fragment),n=t(),N=a("section"),r(T.$$.fragment),R=t(),I.c(),L=t(),V=a("div"),r(C.$$.fragment),D=t(),H=o(G),this.h()},l(e){c(s.$$.fragment,e),n=l(e),N=u(e,"SECTION",{class:!0});var r=m(N);c(T.$$.fragment,r),R=l(r),I.l(r),r.forEach(f),L=l(e),V=u(e,"DIV",{class:!0});var t=m(V);c(C.$$.fragment,t),D=l(t),H=g(t,G),t.forEach(f),this.h()},h(){d(N,"class","svelte-157wjgr"),d(V,"class","player-box svelte-157wjgr")},m(e,r){$(s,e,r),i(e,n,r),i(e,N,r),$(T,N,null),p(N,R),_[A].m(N,null),i(e,L,r),i(e,V,r),$(C,V,null),p(V,D),p(V,H),U=!0},p(e,[n]){const r={};1&n&&(r.mood=e[0]),4&n&&(r.noteLetter=e[2].params.slug),2&n&&(r.message=e[4][e[1]]),s.$set(r);let t=A;A=q(e),A!==t&&(x(),h(_[t],1,1,(()=>{_[t]=null})),w(),I=_[A],I||(I=_[A]=Q[A](e),I.c()),y(I,1),I.m(N,null)),(!U||8&n)&&G!==(G=e[3].wonRound+"")&&v(H,G)},i(e){U||(y(s.$$.fragment,e),y(T.$$.fragment,e),y(I),k((()=>{M||(M=j(N,E,{},!0)),M.run(1)})),y(C.$$.fragment,e),U=!0)},o(e){h(s.$$.fragment,e),h(T.$$.fragment,e),h(I),M||(M=j(N,E,{},!1)),M.run(0),h(C.$$.fragment,e),U=!1},d(e){S(s,e),e&&f(n),e&&f(N),S(T),_[A].d(),e&&M&&M.end(),e&&f(L),e&&f(V),S(C)}}}function G(e,s,n){let r,t,a;N(e,M,(e=>n(2,r=e))),N(e,C,(e=>n(3,t=e))),N(e,D,(e=>n(6,a=e)));let o="sad",c=r.params.slug;console.log(c);let l=t.lettersCToB.findIndex((e=>{if(e===c)return!0}));T(C,t.currentScale=H[l].notes,t),T(C,t.currentNoteTypes=H[l].noteTypes,t),console.log(H[l].notes);let u=a[c],m=0;console.log("key is "+l),T(C,t.canPresent=!0,t);return[o,m,r,t,u,()=>{console.log("checking answer..."),console.log("playing chord"),t.enteredHalfTones.forEach(((e,s)=>{new Audio(`../static/sounds/note${e}.wav`).play()})),t.currentNoteTypes;const e=[t.currentScale[0],t.currentScale[2],t.currentScale[4]];t.currentScale[0],t.currentScale[2],t.currentScale[4],console.log("chord needed: "+e),console.log("your chord: "+t.enteredNotes),!function(e,s){if(!Array.isArray(e)||!Array.isArray(s)||e.length!==s.length)return!1;const n=e.concat().sort(),r=s.concat().sort();for(let t=0;t<n.length;t++)if(n[t]!==r[t])return!1;return!0}(e,t.enteredNotes)?n(1,m=2):(n(0,o="happy"),n(1,m=1),T(C,t.gold+=25,t),T(C,t.wonRound=!0,t),T(C,t.canPresent=!1,t),t.completedLetters.push(c))}]}class Q extends e{constructor(e){super(),s(this,e,G,U,n,{})}}export{Q as default};
