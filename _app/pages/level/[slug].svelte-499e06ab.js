import{S as e,i as s,s as n,j as r,k as t,e as a,t as o,m as l,n as c,c as u,a as m,d,g as f,b as g,o as $,f as i,E as p,u as h,w,x as y,h as v,M as k,O as j,v as S,H as N,V as T,r as x,U as E,Q as R,T as b,N as A}from"../../chunks/vendor-09e2d04d.js";import{p as I}from"../../chunks/stores-479d6723.js";import{N as M,M as L,R as V}from"../../chunks/ReceiveGoldUI-4d6b2fb4.js";import{M as B}from"../../chunks/MessageBox-6a670d8f.js";/* empty css                                                        */import{g as C,c as D}from"../../chunks/stores-27da06e7.js";import{s as H}from"../../chunks/scales-63786811.js";function O(e){let s,n;return s=new L({}),{c(){r(s.$$.fragment)},l(e){l(s.$$.fragment,e)},m(e,r){$(s,e,r),n=!0},i(e){n||(y(s.$$.fragment,e),n=!0)},o(e){h(s.$$.fragment,e),n=!1},d(e){S(s,e)}}}function P(e){let s,n,t,o,c;return n=new V({}),{c(){s=a("div"),r(n.$$.fragment)},l(e){s=u(e,"DIV",{});var r=m(s);l(n.$$.fragment,r),r.forEach(d)},m(e,r){i(e,s,r),$(n,s,null),c=!0},i(e){c||(y(n.$$.fragment,e),k((()=>{o&&o.end(1),t||(t=R(s,b,{y:-200,duration:700})),t.start()})),c=!0)},o(e){h(n.$$.fragment,e),t&&t.invalidate(),o=A(s,E,{}),c=!1},d(e){e&&d(s),S(n),e&&o&&o.end()}}}function U(e){let s,n,N,T,R,b,A,I,L,V,C,D,H,U,G=e[3].wonRound+"";s=new B({props:{mood:e[0],noteLetter:e[2].params.slug,message:e[4][e[1]]}}),T=new M({});const Q=[P,O],_=[];function q(e,s){return e[3].wonRound?0:1}return b=q(e),A=_[b]=Q[b](e),C=new B({props:{player:!0,message:"i know how to do this"}}),C.$on("click",e[5]),{c(){r(s.$$.fragment),n=t(),N=a("section"),r(T.$$.fragment),R=t(),A.c(),L=t(),V=a("div"),r(C.$$.fragment),D=t(),H=o(G),this.h()},l(e){l(s.$$.fragment,e),n=c(e),N=u(e,"SECTION",{class:!0});var r=m(N);l(T.$$.fragment,r),R=c(r),A.l(r),r.forEach(d),L=c(e),V=u(e,"DIV",{class:!0});var t=m(V);l(C.$$.fragment,t),D=c(t),H=f(t,G),t.forEach(d),this.h()},h(){g(N,"class","svelte-157wjgr"),g(V,"class","player-box svelte-157wjgr")},m(e,r){$(s,e,r),i(e,n,r),i(e,N,r),$(T,N,null),p(N,R),_[b].m(N,null),i(e,L,r),i(e,V,r),$(C,V,null),p(V,D),p(V,H),U=!0},p(e,[n]){const r={};1&n&&(r.mood=e[0]),4&n&&(r.noteLetter=e[2].params.slug),2&n&&(r.message=e[4][e[1]]),s.$set(r);let t=b;b=q(e),b!==t&&(x(),h(_[t],1,1,(()=>{_[t]=null})),w(),A=_[b],A||(A=_[b]=Q[b](e),A.c()),y(A,1),A.m(N,null)),(!U||8&n)&&G!==(G=e[3].wonRound+"")&&v(H,G)},i(e){U||(y(s.$$.fragment,e),y(T.$$.fragment,e),y(A),k((()=>{I||(I=j(N,E,{},!0)),I.run(1)})),y(C.$$.fragment,e),U=!0)},o(e){h(s.$$.fragment,e),h(T.$$.fragment,e),h(A),I||(I=j(N,E,{},!1)),I.run(0),h(C.$$.fragment,e),U=!1},d(e){S(s,e),e&&d(n),e&&d(N),S(T),_[b].d(),e&&I&&I.end(),e&&d(L),e&&d(V),S(C)}}}function G(e,s,n){let r,t,a;N(e,I,(e=>n(2,r=e))),N(e,C,(e=>n(3,t=e))),N(e,D,(e=>n(6,a=e)));let o="sad",l=r.params.slug;console.log(l);let c=t.lettersCToB.findIndex((e=>{if(e===l)return!0}));T(C,t.currentScale=H[c].notes,t),T(C,t.currentNoteTypes=H[c].noteTypes,t),console.log(H[c].notes);let u=a[l],m=0;console.log("key is "+c),T(C,t.canPresent=!0,t);return[o,m,r,t,u,()=>{console.log("checking answer..."),console.log("playing chord"),t.enteredHalfTones.forEach(((e,s)=>{new Audio(`../static/sounds/note${e}.wav`).play()})),t.currentNoteTypes;const e=[t.currentScale[0],t.currentScale[2],t.currentScale[4]];t.currentScale[0],t.currentScale[2],t.currentScale[4],console.log("chord needed: "+e),console.log("your chord: "+t.enteredNotes),!function(e,s){if(!Array.isArray(e)||!Array.isArray(s)||e.length!==s.length)return!1;const n=e.concat().sort(),r=s.concat().sort();for(let t=0;t<n.length;t++)if(n[t]!==r[t])return!1;return!0}(e,t.enteredNotes)?n(1,m=2):(n(0,o="happy"),n(1,m=1),T(C,t.gold+=25,t),T(C,t.wonRound=!0,t),T(C,t.canPresent=!1,t),t.completedLetters.push(l))}]}class Q extends e{constructor(e){super(),s(this,e,G,U,n,{})}}export{Q as default};
